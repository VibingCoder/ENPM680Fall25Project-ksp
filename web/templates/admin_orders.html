{{ define "admin_orders" }}{{ template "header" . }}
<h1>Admin: Orders</h1>
<p><a href="/admin">Back to admin home</a></p>
<table class="table">
  <tr><th>ID</th><th>Customer</th><th>Total</th><th>Status</th><th>When</th><th>Action</th></tr>
  {{ range .Orders }}
  <tr>
    <td>{{ .ID }}</td><td>{{ .CustomerName }}</td>
    <td>${{ printf "%.2f" .Total }}</td><td>{{ .Status }}</td><td>{{ .CreatedAt }}</td>
    <td>
      <form method="post" action="/admin/orders/{{ .ID }}/status" class="inline-form">
        <input type="hidden" name="csrf" value="{{ $.CSRFToken }}">
        <select name="status">
          <option value="PLACED" {{ if eq .Status "PLACED" }}selected{{ end }}>PLACED</option>
          <option value="RESERVED" {{ if eq .Status "RESERVED" }}selected{{ end }}>RESERVED</option>
          <option value="SHIPPED" {{ if eq .Status "SHIPPED" }}selected{{ end }}>SHIPPED</option>
          <option value="CANCELED" {{ if eq .Status "CANCELED" }}selected{{ end }}>CANCELED</option>
        </select>
        <button class="btn">Update</button>
      </form>
    </td>
  </tr>
  {{ end }}
</table>
{{ template "footer" . }}{{ end }}
